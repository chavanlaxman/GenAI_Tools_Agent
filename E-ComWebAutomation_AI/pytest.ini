[pytest]
# Enable parallel execution and reporting
addopts = 
    -n auto 
    --html=test-report.html 
    --self-contained-html
    --tb=short
    --strict-markers
    --capture=tee-sys
    --color=yes
    --code-highlight=yes
    --showlocals
    --verbose

# Test organization
testpaths = Tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Parallel execution configuration
xdist_group_by = module  # Group tests by module for better parallelization

# Reporting configuration
render_collapsed = True
render_js = True
render_style = True

# Test markers
markers =
    # Test Categories
    smoke: Quick smoke tests for critical functionality
    regression: Full regression test suite
    ui: Browser-based UI tests
    api: API integration tests
    
    # Test Priority and Status
    critical: High-priority tests that must pass
    flaky: Tests known to be unstable
    slow: Tests that take longer than average to run
    
    # Feature Areas
    login: Authentication related tests
    cart: Shopping cart related tests
    payment: Payment processing tests
    social: Social login integration tests
    
    # Test Requirements
    requires_auth: Tests requiring authentication
    requires_data: Tests requiring specific test data
    
    # Environment
    production: Tests safe to run in production
    staging: Tests for staging environment
    qa: Tests for QA environment
    
    # Browser Specific
    chrome_only: Tests that only run in Chrome
    firefox_only: Tests that only run in Firefox
    
    # Other
    parallel_safe: Tests safe for parallel execution
    skip_in_ci: Tests to skip in CI environment

# Logging configuration
log_cli = True
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s (%(filename)s:%(lineno)s)
log_cli_date_format = %Y-%m-%d %H:%M:%S
log_auto_indent = True

# Test execution configuration
timeout = 300
minversion = 7.0
xfail_strict = True
filterwarnings =
    ignore::DeprecationWarning
    ignore::UserWarning
    error::RuntimeWarning

# Retry configuration
retries = 2
retry_delay = 1

# Custom options
env = qa
browser = chrome